<!DOCTYPE html>
<html>
    
<head>
  <title>File Metadata Microservice</title>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
</head>
    
<body>
<div class="container">
    <h1 class="header">FCC API: File Metadata Microservice</h1>
    <p>
        By Agustina (abrden) Barbetta |
        <a href="https://github.com/abrden/file-metadata-microservice">GitHub Repository</a> |
        <a href="http://www.freecodecamp.com/challenges/file-metadata-microservice">Free Code Camp API Projects Challenge</a>
    </p>
    <blockquote>User Stories:
        <ol>
            <li>I can submit a FormData object that includes a file upload.</li>
            <li>When I submit something, I will receive the file size in bytes within the JSON response.</li>
        </ol>
    </blockquote>
    <h2>Usage:</h2>
    instructions here
    
    <!--
	<form id="file-form" enctype="multipart/form-data">
		<input type="file" name="the-file" />
		<input type="submit" value="Upload" />
	</form>
	-->

    <form role="form" id="file-form" enctype="multipart/form-data">
        <input type="file" name="the-file" />
        <button type="submit" value="Upload" class="btn btn-primary">Submit</button>
    </form>
	
	<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
	<script type="text/javascript">
		$(document).ready(function() {

			var files;
			$('input[type=file]').on('change', function(event) {
				files = event.target.files;
			});
			$('form').on('submit', function(event) {

				event.stopPropagation();
				event.preventDefault();

				var data = new FormData();
				$.each(files, function(key, value) {
					data.append(key, value);
				});

				$.ajax({
					url: window.location.origin + '/api/fileanalyse/',
					type: 'POST',
					data: data,
					cache: false,
					processData: false,
					contentType: false,
					error: function(jqXHR, textStatus, errorThrown) {
						alert('Error: ' + textStatus);
					},
					success: function(data) {
						alert('File size: ' + data.fileSize);
					}
				});
			});
		});
	</script>
</div>
</body>
</html>